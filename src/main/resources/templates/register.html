<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<!-- URL : http://localhost:8080/join  -->
    <head>
        <meta charset="UTF-8">
        <title>Book Search</title>
        <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
        <script>
            $(document).ready(function(){
                $("#register_process").click(function(){
                    var json = {
                    	username : $("#username").val(),
                    	password : $("#password").val()

                    };
                    
                    for(var str in json){
                        if(json[str].length == 0){
                            alert($("#" + str).attr("placeholder") + "를 입력해주세요.");
                            $("#" + str).focus();
                            return;
                        }
                    }
                    
                     $.ajax({
                        type : "post",
                        url : "register",
                        data : json,
                        dataType: "json",
                        success : function(data) {
                        	console.log(data);
                            switch (Number(data)) {
                            case 0:
                                alert("정상적으로 회원가입 되었습니다.");
                                window.location.href = "/login";
                                break;
                            case 1:
                                alert("아이디가 중복 되었습니다.");
                                window.location.href = "/register";
                                break;
                            default:
                                alert("알수없는 오류가 발생 했습니다. [Error Code :" + Number(data) + "]");
                                break;
                            }
                        },
                        error : function(error) {
                            alert("오류 발생"+ error);
                        }
                    });
                });
            });
        </script>



    </head>
    <body>
        <div class="title">
            <h1>REGISTER</h1>
        </div>
        <div class="content">
            <form  method="post">
                <input type="text" id="username" name="username" placeholder="id"/> <br/>
                <input type="password" id="password" name="password" placeholder="pw"/> <br/>
                <input type="button" id="register_process" value="가입하기" />
            </form>
            <div id="checkResult" />
            <a href="/">취소</a>
        </div>
    </body>
</html>